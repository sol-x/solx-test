# Instructions

Please do not fork this repo on github or open a pull request.
Also, please do not use chatgpt or any other AI assistant, the code generated by this stuff will be rejected.
If the task seems to you too complicated, don't implement all the tasks, focus on readability and quality.
Submit your solution via email in an archive, which can be created with the following git command:

```bash
git archive HEAD . -o solution.tar
```

To run this project type:

```bash
pnpm install
pnpm dev
```

## Main task
Implement the MockClient class that should simulate the original class behavior
and has the following set of public methods listed in [MockClient.ts](./MockClient.ts).

**MockClient** should store db items in-memory.

Db items can be a different entities like a **User** or an **Application**.
The examples of original client usage:

### Create user

```typescript
await client
    .api("/users")
    .post({
        email: 'test@mail.co',
        firstName: 'John',
        lastName: 'Doe',
        deleted: true
    })
```


### Get 1 user by id
if we fetch item by id like `/entities/entity-id` the `get()` response should return the DbEntity, in all other cases 
```
{
    value: DbEntity[];
    "@odata.nextLink"?: string;
}
```

```typescript
const user = await client
    .api(`/users/${userId}`)
    .select(['id', 'email'])
    .get()
```


### Get 1 user by any other property

```typescript
const [user] = await client
    .api("/users")
    .filter("email eq 'test@mail.co'")
    .top(1)
    .get()
```

### Get all deleted users

`nextLink` is optional and depends on the quantity of items in DB, if it exceeds the limit is set by `top()`,
it should be returned along with the value

```typescript
const { value: users, ["@odata.nextLink"]: nextLink } = await client
    .api("/users")
    .select(['firstName', 'lastName', 'email', 'id'])
    .filter("deleted eq true")
    .top(10)
    .get()
```
 
in case there are more than 10 users in DB, get next page:

```typescript
const { value: nextUsers } = await client
    .api(nextLink)
    .get()
```

### Get users by provided ids

```typescript
await client
    .api("/users")
    .select(['firstName', 'lastName', 'email', 'id'])
    .top(999)
    .filter("id in ('id-1', 'id-2')")
    .get()
```

### Update and delete user

```typescript
await client
    .api(`/users/${userId}`)
    .update({ firstName: 'New Name' })
```

```typescript
await client
    .api(`/users/${userId}`)
    .update({ deleted: false })
```

Note: The task is done if candidate implements all public methods of MockClient class, including `nextLink` support,
filtering by `in` and `eq` operators, supporting different entities (not only users)

## Bonus task

If the main task seems to you too easy, you can implement the unit tests for implemented methods.
Add 1-2 cases per each method.
Can use any test runners (jest or vitest are welcomed though)